---
title: Custom Sign-In for your Next.js app with TernSecure
---

import { Step, Steps } from "fumadocs-ui/components/steps";

<Steps>
<Step>
### Wrap your own sign-in component with SignInProvider

```tsx title="app/sign-in/[[...sign-in]]/page.tsx"
import { SignInFormField } from "@/components/signin-form-field";
import { SignInProvider } from "@tern-secure/nextjs";

export default function Page() {
  return (
    <SignInProvider>
      <SignInFormField />
    </SignInProvider>
  );
}
```

</Step>
<Step>
### Add Sign-In methods in your component

<Callout>
  make sure you have enabled the sign-in method in Firebase console or identity
  platform.
</Callout>

we will use `useSignIn` hook from TernSecure to handle sign-in methods.

```tsx title="components/signin-form-field.tsx"
import { useSignIn } from "@tern-secure/nextjs";

const { signIn } = useSignIn();

const signInPasswordField = async () => {
  const res = await signIn?.withEmailAndPassword({ email, password });
  if (res?.status === "error") {
    setFormError({
      status: "error",
      message: res.message,
      error: res.error,
    });
  }
  if (res?.status === "success") {
    // do something after successful sign-in
  }
};
```

continue, in your form component

```tsx title="components/signin-form-field.tsx"
const handleEmailSignIn = async (e: React.FormEvent) => {
  e.preventDefault();
  return signInPasswordField();
};

return (
  <div>
    <form onSubmit={handleEmailSignIn}>{/* your form fields */}</form>
  </div>
);
```

</Step>
<Step>
### Make sign-in public route
<Callout>
  if you are using Next.js 15 middleware.ts should be renamed to proxy.ts
</Callout>

This is an example of proxy without protecting route.

``` ts title="proxy.ts"
import {
  ternSecureProxy,
  createRouteMatcher,
} from "@tern-secure/nextjs/server";

const publicPaths = createRouteMatcher([
  "/api/auth/(.*)",
  "/sign-in(*)", // [!code highlight]
]);

export const config = {
  matcher: [
    "/((?!_next|[^?]*\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)",
    "/(api|trpc)(.*)",
  ],
};

export default ternSecureProxy();
```
</Step>
<Step>
### Update environment variables

Set the following environment variables to tell TernSecure where your sign-in page is located.

```bash title=".env"
NEXT_PUBLIC_SIGN_IN_URL='/sign-in'
```

</Step>
</Steps>
